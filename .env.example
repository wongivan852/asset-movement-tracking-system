# ===================================================================
# Asset Movement Tracking System - Environment Configuration
# ===================================================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env file to version control!
# ===================================================================

# Django Core Settings
# ===================================================================
SECRET_KEY=your-secret-key-here-change-in-production
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1,your-domain.com
TIME_ZONE=Asia/Hong_Kong

# Database Configuration
# ===================================================================
# Leave DB_NAME empty to use SQLite (development)
# Set DB_NAME to use PostgreSQL (production)

# PostgreSQL Configuration (Production)
DB_NAME=
DB_USER=postgres
DB_PASSWORD=
DB_HOST=localhost
DB_PORT=5432

# SQLite is used by default if DB_NAME is not set
# No additional configuration needed for SQLite

# ===================================================================
# PHASE 1: SSO INTEGRATION CONFIGURATION
# ===================================================================

# OAuth 2.0 / OpenID Connect Configuration
# -------------------------------------------------------------------
# Obtain these credentials from your Integrated Business Platform's
# SSO configuration page.
#
# Required for SSO authentication to work.
# Leave empty to use local Django authentication only.

OAUTH_CLIENT_ID=
OAUTH_CLIENT_SECRET=
OAUTH_SERVER_URL=

# Examples for common SSO providers:
#
# For Azure AD / Microsoft Entra ID:
# OAUTH_SERVER_URL=https://login.microsoftonline.com/{tenant-id}/v2.0
#
# For Okta:
# OAUTH_SERVER_URL=https://your-domain.okta.com
#
# For Google:
# OAUTH_SERVER_URL=https://accounts.google.com
#
# For Auth0:
# OAUTH_SERVER_URL=https://your-tenant.auth0.com
#
# For Keycloak:
# OAUTH_SERVER_URL=https://your-keycloak-server.com/realms/your-realm

# Platform Integration
# -------------------------------------------------------------------
# URL of the Integrated Business Platform that will embed this app
# Used for CORS and CSP configuration

PLATFORM_URL=https://integrated-platform.company.com

# Alternative OAuth 2.0 Endpoints (if OIDC not supported)
# -------------------------------------------------------------------
# Uncomment and configure these if your SSO provider doesn't support
# OpenID Connect and requires manual endpoint configuration

# OAUTH_AUTHORIZE_URL=https://sso.example.com/oauth/authorize
# OAUTH_TOKEN_URL=https://sso.example.com/oauth/token
# OAUTH_PROFILE_URL=https://sso.example.com/oauth/userinfo

# ===================================================================
# Email Configuration (Optional)
# ===================================================================
# Used for sending notifications and password reset emails

EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@company.com
EMAIL_HOST_PASSWORD=your-email-password

# For Gmail:
# 1. Enable 2-factor authentication
# 2. Generate an "App Password"
# 3. Use the app password as EMAIL_HOST_PASSWORD

# For Microsoft 365:
# EMAIL_HOST=smtp.office365.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=True

# ===================================================================
# Production Security Settings (Uncomment for HTTPS deployment)
# ===================================================================
# These settings should be enabled when deploying to production
# with HTTPS enabled. Leave commented for local development.

# SECURE_SSL_REDIRECT=True
# SECURE_HSTS_SECONDS=31536000
# SECURE_HSTS_INCLUDE_SUBDOMAINS=True
# SECURE_HSTS_PRELOAD=True
# SESSION_COOKIE_SECURE=True
# CSRF_COOKIE_SECURE=True

# ===================================================================
# SSO Claim Mapping Reference
# ===================================================================
# The application expects the following claims from your SSO provider:
#
# Required Claims:
# - sub or user_id    : Unique user identifier (used for username)
# - email             : User's email address
#
# Optional Claims:
# - given_name        : First name
# - family_name       : Last name
# - employee_id       : Employee ID or number
# - department        : Department name
# - phone             : Phone number
# - role or roles     : User role(s) in the system
#
# Role Mapping:
# SSO Role                -> Application Role
# -----------------------------------------------
# admin, administrator    -> admin (full access)
# manager, site_manager   -> location_manager
# user, employee, staff   -> personnel (default)
#
# Configure your SSO provider to include these claims in the ID token.
# ===================================================================

# ===================================================================
# Callback URLs for SSO Configuration
# ===================================================================
# When configuring your SSO provider, use these callback URLs:
#
# OAuth 2.0 Redirect URI (Callback URL):
# https://your-domain.com/accounts/openid_connect/integrated_platform/login/callback/
#
# Logout Redirect URI:
# https://your-domain.com/accounts/login/
#
# Replace "your-domain.com" with your actual domain name.
# For local development: http://localhost:8000/accounts/...
# ===================================================================

# ===================================================================
# Development Notes
# ===================================================================
#
# 1. For local development without SSO:
#    - Leave OAUTH_* variables empty
#    - Use Django admin to create users
#    - Login at http://localhost:8000/accounts/login/
#
# 2. To test SSO integration:
#    - Configure OAUTH_* variables with your SSO provider
#    - Access http://localhost:8000/accounts/login/
#    - Click "Sign in with Integrated Business Platform"
#
# 3. To test API with JWT:
#    - Obtain token: POST /api/token/ with username/password
#    - Use token: Add header "Authorization: Bearer {token}"
#
# ===================================================================
